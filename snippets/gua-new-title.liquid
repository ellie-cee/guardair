{% comment %}
  new-title.liquid
  
  Usage: {% render 'new-title', title: 'Your Title String Here' %}
  
  Rules applied:
  1. Remove everything after dash (-)
  2. Remove specific words like "The" and "Classic+"
  3. Remove special characters
{% endcomment %}

{%- liquid
  assign processed_title = title
-%}

{% comment %} Step 1: Remove everything after dash (including the dash) {% endcomment %}
{%- liquid
  if processed_title contains '-'
    assign dash_position = processed_title | split: '-' | first
    assign processed_title = dash_position
  endif
-%}

{% comment %} Step 2: Remove specific words {% endcomment %}
{%- liquid
  assign words_to_remove = 'The,Classic+,the,THE,classic+,CLASSIC+'
  assign words_array = words_to_remove | split: ','
  
  for word in words_array
    assign processed_title = processed_title | replace: word, ''
  endfor
-%}

{% comment %} Step 3: Remove special characters using regex-like replacements {% endcomment %}
{% comment %} Remove common special characters {% endcomment %}
{%- liquid
  assign special_chars = '!,@,#,$,%,^,&,*,(,),+,=,{,},[,],|,\,",;,:,<,>,?,/,~,`,.'
  assign special_chars_array = special_chars | split: ','
  
  assign clean_title = processed_title
  
  for special_char in special_chars_array
    assign clean_title = clean_title | replace: special_char, ''
  endfor
-%}

{% comment %} Clean up multiple spaces and trim {% endcomment %}
{%- liquid
  assign clean_title = clean_title | replace: '  ', ' ' | replace: '   ', ' ' | strip
-%}

{% comment %} Assign result to output variable {% endcomment %}
{%- liquid
  assign new_title = clean_title
-%}
{{ new_title }}